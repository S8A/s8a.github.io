{%- assign ytimg_base_url = "https://i.ytimg.com/vi_webp/" -%}
{%- assign ytimg_sizes = "default:120, mqdefault:320, hqdefault:480, sddefault:640, maxresdefault:1280" | split: ", " -%}

{%- capture srcset -%}
  {%- for size in ytimg_sizes -%}
    {%- assign size_array = size | split: ":" -%}
    {%- assign width = size_array[1] -%}
    {%- assign img_url = ytimg_base_url | append: include.id | append: "/" | append: size_array[0] | append: ".webp" -%}
    {{ img_url }} {{ width }}w{% unless forloop.last %}, {% endunless %}
  {%- endfor -%}
{%- endcapture -%}

{%- assign sizes_items = include.sizes | default: "100vw" | split: ", " -%}

{%- capture sizes -%}
  {%- for size in sizes_items -%}
    {%- assign size_item = size | split: ":" -%}
    {%- if size_item.size == 2 -%}
      {% unless forloop.last %}(max-width: {{ size_item[0] }}px){% endunless %} {{ size_item[1] }}{% unless forloop.last %}, {% endunless %}
    {%- else -%}
      {{ size }}{% unless forloop.last %}, {% endunless %}
    {%- endif -%}
  {%- endfor -%}
{%- endcapture -%}

{%- assign src = ytimg_base_url | append: include.id | append: "/maxresdefault.webp" -%}

{% include img.html class=include.class src=src srcset=srcset sizes=sizes alt=include.alt loading=include.loading %}
